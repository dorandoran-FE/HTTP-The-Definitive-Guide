## 1. HTTP 커넥션 관리란?

HTTP(웹 브라우저와 서버 간 데이터 전송을 위한 프로토콜)는 요청과 응답을 주고받는 과정에서 **커넥션(서버와 클라이언트 간의 연결)**을 사용한다. 비효율적인 커넥션 관리는 웹페이지 로딩 속도를 저하시키고, 서버 부하를 증가시킬 수 있다.

왜 HTTP 커넥션 관리가 필요할까?

HTTP/1.0에서는 요청마다 새로운 커넥션을 생성하여 불필요한 연결이 많아지고 지연 시간이 길어졌다.

이를 해결하기 위해 병렬 커넥션, 지속 커넥션, 파이프라인 커넥션 등의 기법이 등장했다.

## 2. 병렬 커넥션 (Parallel Connection)

여러 개의 TCP 커넥션을 생성하여 동시에 HTML, CSS, JS, 이미지 등의 리소스를 다운로드하는 방식이다. 이를 통해 웹페이지 로딩 속도를 향상시킬 수 있다.

장점 & 단점

장점: 빠른 로딩, 대역폭 활용 최적화

단점: 서버 부하 증가, 보통 6~8개의 커넥션 개수 제한

## 3. 지속 커넥션 (Persistent Connection)

하나의 TCP 커넥션을 유지하면서 여러 요청을 처리하는 방식이다. HTTP/1.1부터 기본 적용되었다.


## 4. 파이프라인 커넥션 (Pipelining Connection)

응답을 기다리지 않고 여러 개의 요청을 한 번에 보내는 방식이다. 네트워크 왕복 시간(RTT) 감소로 성능이 향상된다. 하지만 응답 순서를 유지해야 하므로 실무에서는 거의 사용되지 않으며, HTTP/2에서 대체 기법이 제공된다.

## 5. 커넥션 끊기 (Connection Termination)

클라이언트, 서버, 프락시는 필요에 따라 TCP 커넥션을 종료할 수 있다. 잘못된 종료 방식은 데이터 손실을 초래할 수 있다.

올바른 커넥션 종료 방식

전체 끊기: 요청과 응답이 끝난 후 즉시 TCP 종료

절반 끊기: 입력 또는 출력 채널 중 하나만 끊음

우아한 종료: 커넥션을 천천히 닫아 데이터 손실 방지 (실무에서 가장 많이 사용됨)

실무에서 가장 많이 쓰는 방식

대부분의 웹 서버(Nginx, Apache, Node.js 등)는 Keep-Alive를 유지하고, 일정 시간이 지나거나 요청이 없으면 자동 종료한다.

클라이언트도 Connection: keep-alive를 사용하지만, 페이지가 닫히거나 요청이 필요 없으면 적절히 종료한다.

## 6. 핵심 요약

병렬 커넥션: 여러 개의 연결을 동시에 사용해 빠르지만, 서버 부하 증가 가능

지속 커넥션: 기존 연결을 유지하여 불필요한 재연결 방지 및 성능 최적화

파이프라인 커넥션: 요청을 미리 보내 대기 시간을 단축하지만 실무에서는 거의 사용되지 않음

커넥션 끊기: 불필요한 연결을 효과적으로 종료해야 하며, 우아한 종료가 가장 적절한 방식
